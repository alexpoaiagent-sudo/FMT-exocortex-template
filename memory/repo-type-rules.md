# Правила работы по типам репозиториев

> Реестр репо: `DS-ecosystem-development/0.OPS/REPOSITORY-REGISTRY.md`

## Уровни принципов → типы репо

| Level | Принципы | Фреймворк | Тип репо |
|-------|----------|-----------|----------|
| 0 | Нулевые (ZP.1–ZP.6) | Нет | **Foundation** (ZP) |
| 1 | FPF (холоны, BC, trust) | FPF (бандл) | **Framework** |
| 2 | Pack (домен) | SPF | **Pack** + **Framework** |
| 3 | Downstream (проекты) | S2R и другие | **Downstream** + **Format** |

> Pack = вторые принципы. Downstream = третьи принципы. Подробно: `ZP/README.md`

## Foundation (ZP)

**Содержит:** 6 нулевых принципов + карта иерархии (0→1→2→3).

**Можно:** Уточнять формулировки принципов, обновлять карту иерархии.

**Нельзя:** Добавлять фреймворк-машинерию (нулевые принципы слишком фундаментальны). Доменное содержание (→ Pack).

## Pack (source-of-truth) = вторые принципы

**Содержит:** Формализованные знания домена, методы, work products, failure modes, различения, SoTA-аннотации.

**Можно:** Добавлять/изменять знание домена, методы, WP, FM. Обновлять SoTA.

**Нельзя:** Дидактику (шаги, уроки). Путать метод с инструментом. Копировать без формализации. Хранить общие концепции FPF/SPF. Хранить планы/сроки/роли (→ Governance).

**Lint:** Проверяй process-lint перед коммитом.

> Pack содержит ТОЛЬКО доменное знание. FPF/SPF → Framework. Планы → Governance.

## Downstream (все подтипы)

> Downstream НЕ source-of-truth. Знание берётся из Pack.

| Подтип | Можно | Нельзя |
|--------|-------|--------|
| `instrument` | Код, тесты, документация кода | Менять source-of-truth |

### Правило минимума в instrument-репо

> **Репо агентов/ботов = преимущественно код и текст-как-код.**
> Архитектурные решения, UX-модели, доменные описания → Pack цифровой платформы.
> Межсистемные сценарии → DS-ecosystem-development.
> В instrument-репо остаётся: код, конфиги, CLAUDE.md (привязка к Pack), README (как запустить).

### Именование downstream-instrument для ИИ-систем

Конвенция: `DS-{slug}` (примеры: `DS-strategist-agent`, `DS-extractor-agent`).
Привязка к Pack через `source-of-truth: {ID}` в CLAUDE.md репо, не через имя.
| `governance` | Планы, реестры, решения | Менять предметное знание |
| `surface` | Курсы, гайды, маршруты | Создавать знание (только потреблять) |

### Governance: DS-my-strategy (личная база данных)

**Содержит:** Планы недели, заметки (inbox/), контексты РП, extraction reports, онтологию.

**СТРОГО НЕЛЬЗЯ:** Скрипты, код, промпты, launchd-конфиги, агенты. Это ТОЛЬКО база данных — входы и выходы агентов. Агенты живут в своих DS-*-agent/ репо или DS-synchronizer/.

### Governance (DS-ecosystem-development)

**Содержит:** Справочный контент, реестры, планы, процессы, оргструктуру, ADR.

**Правило чистоты:** Pack-контент в DS-ecosystem-development → предложи миграцию в Pack. Architecture-папки = ссылки + реестры, НЕ знания домена.

## Format (протокол)

**Можно:** Уточнять спецификацию формата, добавлять примеры.
**Нельзя:** Предметное содержание.

## Framework (SPF, FPF)

**Можно:** Спецификации формы/процесса, концептуальные модели, шаблоны, process lint.
**Нельзя:** Доменное содержание (→ Pack). Дидактику (→ Downstream).

---

## Repository-first режим

**Никогда не отвечай из общих знаний без опоры на репозиторий.**

1. Найди минимум 1-2 релевантных файла в репозитории
2. Собери Context Pack
3. Только потом формируй ответ

Если контекст не найден → скажи "в репозитории нет источника", предложи создать документ.

---

## Context Pack (формат)

```markdown
## Context Pack для [запрос]
### Источники:
1. `путь/к/файлу.md` — описание
### Ключевые выдержки:
> [цитата с источником]
### Не использовано:
- Документ X — не релевантен, т.к. ...
```

---

## Frontmatter (базовый)

```yaml
---
type: doc    # doc, spec, process, report
status: draft # draft, active, archived
created: YYYY-MM-DD
updated: YYYY-MM-DD
---
```
