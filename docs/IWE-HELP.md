# IWE: справочник для бота

> Краткая справка по Intelligent Working Environment (IWE) для поиска и ответов бота.
> Полная установка: [SETUP-GUIDE.md](SETUP-GUIDE.md)

---

## Что такое IWE

IWE (Intelligent Working Environment) — интеллектуальная рабочая среда. Включает элементы четырёх типов:

| Тип | Что | Примеры |
|-----|-----|---------|
| **Системы** | Программы, которые работают | Claude Code, Telegram-бот, MCP, WakaTime, Git |
| **Описания** | Правила и методология, загружаемые в ИИ | Экзокортекс (CLAUDE.md + memory/), Pack, промпты агентов |
| **Роли** | Кто что делает (функция, не исполнитель) | Стратег, Экстрактор, Синхронизатор, Пользователь |
| **Артефакты** | Рабочие продукты | DS-strategy, Pack-репо, Цифровой двойник |

Полная архитектурная модель: [LEARNING-PATH.md § 1.2](LEARNING-PATH.md). Source-of-truth: DP.IWE.001.

---

## Что нужно для установки

### Обязательно
- macOS, Linux или Windows (через WSL)
- Git + GitHub аккаунт + GitHub CLI (`gh`)
- Node.js v18+ и npm
- Claude Code CLI (`npm install -g @anthropic-ai/claude-code`)
- Подписка Anthropic: **Claude Pro** ($20/мес) — рекомендуется для старта. Если получите значительный эффект от работы с Claude Code — переходите на **Claude Max** (~$100/мес) для полноценной работы без ограничений на количество сообщений.

### Опционально
- VS Code (рекомендуется) или любой другой редактор с терминалом. Claude Code — CLI, работает в любом терминале (Terminal.app, iTerm2 и др.). VS Code удобен: редактор + терминал + расширение Claude Code в одном окне
- Telegram (@aist_me_bot) — для заметок
- WakaTime — трекинг рабочего времени

---

## Как установить IWE

**Время установки: 30–60 минут** (зависит от опыта с терминалом).

Подробное руководство с пошаговыми инструкциями (включая как открыть терминал, установить все зависимости и что делать, если что-то пошло не так): **[SETUP-GUIDE.md](SETUP-GUIDE.md)**

Результат установки:
- Форк шаблона экзокортекса в твой GitHub
- CLAUDE.md и memory/ — настроенные под тебя
- Стратег (ИИ-агент) — в автоматическом расписании
- DS-strategy — приватный репо для планирования

---

## Три роли в IWE

> В шаблоне экзокортекса пока **3 роли**: Стратег, Экстрактор, Синхронизатор. Набор будет расширяться.

### Стратег (R1)
Планирование и рефлексия. Каждое утро (Вт-Вс) формирует план дня из коммитов вчера. Понедельник — подготовка к недельной сессии. Вечером (23:00) — разбор заметок из Telegram.

Ручной запуск (в терминале или встроенном терминале VS Code):
```bash
bash ~/Github/FMT-exocortex-template/roles/strategist/scripts/strategist.sh day-plan
```

### Экстрактор (R2)
Извлечение знаний в Pack-репозитории. 4 сценария: session-close (при закрытии сессии), on-demand (по запросу), inbox-check (каждые 3 часа), knowledge-audit (аудит полноты).

Всегда предлагает, никогда не пишет без одобрения (human-in-the-loop).

Установка (в терминале): `bash ~/Github/FMT-exocortex-template/roles/extractor/install.sh`

### Синхронизатор (R8)
Центральный диспетчер (bash, не ИИ). Управляет расписанием всех ролей, отправляет уведомления в Telegram, делает ночной обзор кода.

Установка (в терминале): `bash ~/Github/FMT-exocortex-template/roles/synchronizer/install.sh`

---

## Протокол ОРЗ (ежедневная работа)

Каждая сессия в Claude Code — три стадии:

**Открытие.** Даёшь задание → Claude проверяет WP Gate (есть ли в плане недели?). Если нет — предлагает добавить. Объявляет роль, метод, оценку.

**Работа.** Claude выполняет задачу. На рубежах фиксирует знания: «Capture: [что] → [куда]».

**Закрытие.** Скажи «закрывай» → Claude коммитит, пушит, обновляет память, бэкапит.

---

## Память (3 слоя)

| Слой | Файл | Когда загружается |
|------|------|-------------------|
| Оперативная | `memory/MEMORY.md` | Всегда (авто-контекст) |
| Правила | `CLAUDE.md` | Всегда (авто-контекст) |
| Справочная | `memory/*.md` | По запросу |

MEMORY.md — личные (текущие задачи, РП недели). Редактируется каждую сессию.
Остальные memory/*.md — платформенные. Обновляются из upstream через `update.sh`.

---

## Обновление IWE

```bash
cd ~/Github/FMT-exocortex-template
bash update.sh          # обновить
bash update.sh --check  # проверить без применения
```

Обновляются: CLAUDE.md, memory/ (кроме MEMORY.md), промпты ролей, скрипты.
НЕ трогаются: MEMORY.md, DS-strategy/, routing.md, личные настройки.

---

## Telegram-заметки

Бот @aist_me_bot принимает заметки:
- `.Текст заметки` (точка + текст)
- `.` + ответ/пересылка на сообщение

Заметки попадают в `DS-strategy/inbox/fleeting-notes.md`. Стратег разбирает вечером (Note-Review).

---

## Частые проблемы

**Claude Code не запускается** — проверь подписку Anthropic и `claude --version`. Начинать можно с Pro plan ($20/мес). Если упираетесь в лимиты — переходите на Max ($100/мес).

**Стратег не формирует план** — проверь `launchctl list | grep strategist` (macOS). Если нет — `bash roles/strategist/install.sh`.

**MEMORY.md не загружается** — проверь путь: `~/.claude/projects/-Users-<username>-Github/memory/MEMORY.md`. Имя директории = путь к workspace через дефисы.

**DS-strategy не создан** — вручную: `mkdir -p ~/Github/DS-strategy/{current,inbox,docs,archive} && cd ~/Github/DS-strategy && git init`.

**Заметки не приходят из Telegram** — проверь подписку в @aist_me_bot. Формат: точка + текст (`.Моя заметка`).

**Как настроить уведомления в Telegram** — создай `~/.config/aist/env`:
```bash
export TELEGRAM_BOT_TOKEN="your-token"
export TELEGRAM_CHAT_ID="your-id"
```

---

## Глоссарий

| Термин | Значение |
|--------|---------|
| IWE | Intelligent Working Environment — интеллектуальная рабочая среда |
| Экзокортекс | Подсистема памяти IWE (CLAUDE.md + MEMORY.md + memory/) |
| Pack | Предметная база знаний (source-of-truth для домена) |
| DS-strategy | Личный стратегический хаб (приватный репо) |
| WP Gate | Проверка: есть ли задача в плане недели? |
| ОРЗ | Открытие → Работа → Закрытие (три стадии сессии) |
| Capture | Фиксация знания по ходу работы |
| Platform-space | Стандартные файлы, обновляются из upstream |
| User-space | Личные файлы, никогда не затираются |
| Routing | Таблица маршрутизации знаний (куда класть captures) |

---

## Дополнительные материалы

- [SETUP-GUIDE.md](SETUP-GUIDE.md) — пошаговая установка (от нуля до работающего IWE)
- [LEARNING-PATH.md](LEARNING-PATH.md) — полный путь изучения: принципы, протоколы, агенты, Pack, SOTA
- [principles-vs-skills.md](principles-vs-skills.md) — почему навыков недостаточно: принципы и генеративная иерархия
